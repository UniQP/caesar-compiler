<testsuite name="Anonymous classes in VC" package="suits.vc.anonym">

	<common-code-base>		
		interface IfcA {
			public void foo();
		}				
	</common-code-base>

	<!-- *=~~=*=~~=*=~~=*=~~=*=~~=*=~~=*=~~=*=~~=*=~~=*=~~=*=~~=*=~~=*=~~=*=~~=*=~~=*=~~= -->
    <compile-check-error id="vcanonym001" error="ANONYMOUS_CLASS_IN_CCLASS" description="Test simple anonymous class">
		<test>			
			new AAA().m();
		</test>
        <code>
        	public cclass AAA {
        		public void m() {
        			IfcA a = new IfcA() {
        				public void foo() {        					
        				}
        			};
        			a.foo();
        		}
			}
        </code>
    </compile-check-error>
    
    <!-- *=~~=*=~~=*=~~=*=~~=*=~~=*=~~=*=~~=*=~~=*=~~=*=~~=*=~~=*=~~=*=~~=*=~~=*=~~=*=~~= -->
    <compile-check-error id="vcanonym002" error="ANONYMOUS_CLASS_IN_CCLASS" description="Test anonymous class in mixin copy">
		<test>			
			new CCC().m();
		</test>
        <code>
        	public cclass AAA {
        		public void m() {
        			IfcA a = new IfcA() {
        				public void foo() {        					
        				}
        			};
        			a.foo();
        		}
			}
			public cclass BBB {
        	}
        	public cclass CCC extends AAA &amp; BBB {
        	}
        </code>
    </compile-check-error>
    
    <!-- *=~~=*=~~=*=~~=*=~~=*=~~=*=~~=*=~~=*=~~=*=~~=*=~~=*=~~=*=~~=*=~~=*=~~=*=~~=*=~~= -->
    <compile-check-error id="vcanonym003" error="ANONYMOUS_CLASS_IN_CCLASS" description="Test access to local vars">
		<test>			
			new AAA().m(42);
		</test>
        <code>
        	public cclass AAA {

 				public void m(int y) {
        		    final int x=y+1;
        			IfcA a = new IfcA() {
        				public void foo() {
        				   System.out.println("" + x);        					
        				}
        			};
        			a.foo();
        		}
			}
        </code>
    </compile-check-error>
    
    <!-- *=~~=*=~~=*=~~=*=~~=*=~~=*=~~=*=~~=*=~~=*=~~=*=~~=*=~~=*=~~=*=~~=*=~~=*=~~=*=~~= -->
    <compile-check-error id="vcanonym004" error="ANONYMOUS_CLASS_IN_CCLASS" description="Test access to outer fields">
		<test>			
			new AAA().m();
		</test>
        <code>
        	public cclass AAA {

 				public int o = 1;

        		public void m() {
        		    IfcA a = new IfcA() {
        				public void foo() {
        				   System.out.println("" + o);        					
        				}
        			};
        			a.foo();
        		}
			}
        </code>
    </compile-check-error>
    	    
</testsuite>
